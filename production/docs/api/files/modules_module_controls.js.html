<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>modules/module_controls.js - Educational Visualization</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http://epe.marine.rutgers.edu/ev/img/ev_logo.png" title="Educational Visualization"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.2.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/EduVis.Configuration.html">EduVis.Configuration</a></li>
            
                <li><a href="../classes/EduVis.Controls.html">EduVis.Controls</a></li>
            
                <li><a href="../classes/EduVis.formats.html">EduVis.formats</a></li>
            
                <li><a href="../classes/resource.html">resource</a></li>
            
                <li><a href="../classes/Tool.html">Tool</a></li>
            
                <li><a href="../classes/Utility.html">Utility</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Resource.html">Resource</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: modules/module_controls.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

/*  *  *  *  *  *  *  
*
* EduVis.controls
*
*/

/**
* The controls module helps create standardized html elements and UI components.
*
* @class Controls
* @constructor
*/

(function (eduVis) {

    &quot;use strict&quot;;

    var _control_load = function () {
    },

/** Copy all properties of an object to another object
* 
* @method _control_create
* @param {Object} tool The parent tool object
* @param {String} id The id to give the control
* @return {Object} obj_control The control json containing all details for the control.
*/

    _control_create = function (tool, id, obj_control) {

        // tool type - ie. textbox, colorpicker, etc - must exist in switch

        // standarization of tool controls, including advanced tools ie. datepicker
        // todo: editor,viewer should both reference this function

        console.log(&quot;...CONTROLS...&quot;);
        console.log( tool, id, obj_control);

        var control = obj_control,
            lbl,
            input, 
            ctrl;

        switch (control.type) {

            case &quot;textbox&quot;:

                lbl = $(&quot;&lt;label /&gt;&quot;)
                    .attr({
                        &#x27;for&#x27;: id
                    })
                    .html(control.label);

                input = $(&quot;&lt;input /&gt;&quot;)
                    .attr({
                        &#x27;id&#x27;: id,
                        &#x27;type&#x27;: &#x27;textbox&#x27;,
                        &#x27;value&#x27;: control.default_value,
                        &#x27;title&#x27;: control.tooltip,
                        &#x27;maxlength&#x27;: typeof (control.maxlength) === &quot;undefined&quot; ? &quot;&quot; : control.maxlength
                    })
                    //.addClass(&quot;span2&quot;)
                    .on(&quot;change&quot;, function () {
                        tool.customization_update();
                    });

                ctrl = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;)
                    .addClass(&quot;control&quot;)
                    .append(lbl)
                    .append(input);

                break;

            case &quot;textarea&quot;:
                lbl = $(&quot;&lt;label /&gt;&quot;)
                    .attr({&#x27;for&#x27;:id})
                    .html(control.label);

                var textarea = $(&quot;&lt;textarea&gt;&lt;/textarea&gt;&quot;)
                    .attr({
                        &#x27;id&#x27;:id,
                        &#x27;type&#x27;:&#x27;textarea&#x27;,
                        &#x27;title&#x27;:control.tooltip,
                        &#x27;rows&#x27;:5
                    })
                    .html(control.default_value)
                    .change(function(){
                        self.customization_update();
                    });

                ctrl = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;)
                    .addClass(&quot;control&quot;)
                    .append(lbl)
                    .append(textarea);

                break;

            case &quot;dropdown&quot;:

                // test control object for appropriate parts
                // control.options
                // control.tooltip
                // control.description
                // control.default_value
                // control.nolabel

                lbl = $(&quot;&lt;label /&gt;&quot;)
                    .attr({
                        &#x27;for&#x27;: id,
                        &#x27;title&#x27;: control.tooltip
                    })
                    .html(control.description);

                // create select element and populate it
                var select = $(&quot;&lt;select&gt;&lt;/select&gt;&quot;)
                    //.addClass(&quot;span3&quot;)
                    .attr({
                        &quot;id&quot;: id
                    }).change(function () {
                        tool.customization_update();
                    });

                console.log(&quot;control dropdown: options:&quot;, control.options);
                // add drop down names and value pair options from contols &quot;options&quot; object
                $.each(control.options, function (option) {

                    var opt = control.options[option];

                    $(select)
                        .append($(&#x27;&lt;option&gt;&lt;/option&gt;&#x27;)
                        .val(opt.value)
                        .html(opt.name));
                });

                // set the default value based on the controls default value element
                // todo: override with custom config value
                select.val( control.default_value );

                ctrl = $(&#x27;&lt;div&gt;&lt;/div&gt;&#x27;);
                //.addClass(&quot;control&quot;);

                if (control.nolabel !== &quot;true&quot; ){
                    ctrl.append( lbl );
                }

                ctrl.append( select );

                break;

            case &quot;checkbox&quot;:

                lbl = $(&quot;&lt;label /&gt;&quot;).attr({
                    &#x27;for&#x27;: id,
                    &#x27;title&#x27;: control.tooltip
                }).html(control.description);

                input = $(&quot;&lt;input /&gt;&quot;)
                    .attr({
                        &#x27;id&#x27;: id,
                        &#x27;type&#x27;: &#x27;checkbox&#x27;,
                        //&#x27;value&#x27;:control.default_value,
                        &#x27;title&#x27;: control.tooltip,
                        &#x27;maxlength&#x27;: typeof (control.maxlength) === &quot;undefined&quot; ? &quot;&quot; : control.maxlength
                        //&#x27;onclick&#x27;:function(){alert(&quot;test&quot;);}
                    });

                if ( control.selected ) {
                    $(input).attr({
                        &#x27;checked&#x27;: &#x27;checked&#x27;
                    });
                }

                ctrl = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;)
                    .addClass(&quot;control&quot;)
                    .append(lbl)
                    .append(input);

                break;

            case &quot;svg&quot;:

                ctrl = $(&quot;&lt;svg&gt;&lt;/svg&gt;&quot;);

                break;

            case &quot;datepicker&quot;:

                lbl = $(&quot;&lt;label /&gt;&quot;)
                    .attr({
                        &#x27;for&#x27;: id + &quot;_dp&quot;,
                        &#x27;title&#x27;: control.tooltip
                    })
                    .html(control.description);

                input = $(&quot;&lt;input /&gt;&quot;)
                    .addClass(&quot;input-small&quot;)
                    .attr({
                        &quot;id&quot;: id,
                        &quot;type&quot;: &quot;text&quot;
                    })
                    .addClass(&quot;datepicker&quot;)
                    .val(control.default_value)
                    .on(&quot;change&quot;, function () {
                        tool.customization_update();
                    });

                // set jquery datepicker settings
                $( input ).datepicker({
                    &quot;dateFormat&quot;: &quot;yy-mm-dd&quot;,
                    changeMonth: true,
                    changeYear: true,
                    showButtonPanel: true
                })
                    .on(&quot;changeDate&quot;, function () {
                        tool.customization_update();
                    });

                ctrl = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;)
                    .addClass(&quot;control ctlhandle&quot;)
                    .append(lbl)
                    .append(input);

                break;


            case &quot;colorpicker&quot;:

                // test for dependency of colorpicker? this really should be controlled by the tool.
                // but with test, we could fall back to less desireable color picker

                // find the textbox in the control and init colorpicker
                lbl = $(&quot;&lt;label /&gt;&quot;)
                    .attr({
                        &#x27;for&#x27;: id + &quot;_cp&quot;,
                        &#x27;title&#x27;: control.tooltip
                    })
                    .html(control.description);

                input = $(&quot;&lt;input /&gt;&quot;)
                    .attr({
                        &quot;id&quot;: id,
                        &quot;type&quot;: &quot;text&quot;
                    })
                    .addClass(&quot;readonly&quot;)
                    .val(control.default_value)
                   // .css({&quot;float&quot;:&quot;left !important&quot;});

                var el_i = $(&quot;&lt;i&gt;&lt;/i&gt;&quot;)
                    .css({
                        &quot;background-color&quot;: control.default_value,
                    });

                var el_span = $(&quot;&lt;span&gt;&lt;/span&gt;&quot;)
                    .addClass(&quot;add-on&quot;)
                    .append(el_i);

                var el_div = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;)
                    .addClass(&quot;input-append color&quot;)
                    .attr({
                        &quot;id&quot;: id + &quot;_cp&quot;,
                        &quot;data-color&quot;: control.default_value,
                        &quot;data-color-format&quot;: &quot;hex&quot;
                    })
                    .append(input)
                        .append(el_span);

                $(el_div).colorpicker()
                    .on(&quot;changeColor&quot;, function (cp) {
                        $(&quot;#&quot; + id).val(cp.color.toHex());
                        //$(&quot;#&quot; + id).val(tool.current_config[id] = cp.color.toHex())
                        //self.updateJSON();
                        tool.customization_update();
                    });

                ctrl = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;)
                    .addClass(&quot;control ctlhandle&quot;)
                    .append(lbl)
                    .append(el_div);

                break;


            case &quot;selection&quot;: 
                
                console.log(&quot;tool control.. SELECTION&quot;);

                lbl = $(&quot;&lt;label /&gt;&quot;)
                    .attr({
                        &#x27;for&#x27;: id + &quot;-dropdown&quot;,
                        &#x27;title&#x27;: control.tooltip
                    })
                    .html( control.description );

                // add dropdown..

                var el_selectionDropdown = self.toolControl(tool, id+&quot;-dropdown&quot;, control );

                var el_button = $(&quot;&lt;a&gt;&lt;/a&gt;&quot;)
                    .addClass(&quot;btn next&quot;)
                    .html(&quot;Add&quot;)
                    .on(&quot;click&quot;,function(){ alert(&quot;clicked&quot;);} );

                var el_selections = $(&quot;&lt;ul&gt;&lt;/ul&gt;&quot;)
                    .attr(&quot;id&quot;, id + &quot;observations-selected&quot;);

                $.each( control.selectedItems, function(  item, itemObj ){

                        el_selections.append(
                            $(&quot;&lt;li&gt;&lt;/li&gt;&quot;).html( itemObj.name )
                        );
                    }
                );
                // add button next to dropdown..
                // event handler for click of button.. remove option from dropdown

                $(el_selectionDropdown).val( control.default_value );

                var template = self.uiBootstrap( id, &quot;fluidContainer&quot;,
                    {
                        rows:[
                            {
                                cols:[12],
                                colControls:[ el_lbl ]
                            },
                            {   cols:[ 10, 2 ],
                                colControls:[ el_selectionDropdown , el_button]

                            },
                            {
                                cols:[12],
                                colControls:[ el_selections ]
                            }
                        ]

                    }
                );

                console.log(template);

                ctrl = $(template)
                    .addClass(&quot;control&quot;);
        //                .append(lbl)
        //                .append(el_selectionDropdown)
        //                .append(el_button)
        //                .append(
        //                    $(&quot;&lt;div&gt;&lt;/div&gt;&quot;).append( el_selections )
        //                )


                break;


            case &quot;slider&quot;:

                //todo: slider control should be moved here from EV3/4

                break;

            default:
                // empty div if nothing is passed
                ctrl = $(&quot;&lt;div&gt;&lt;/div&gt;&quot;);
                break;
        }

        if ( control.popover ) {
            // now attach the popover to the div container for the control if set
            $(ctrl).attr({
                &#x27;rel&#x27;: &#x27;popover&#x27;,
                &#x27;title&#x27;: control.label,
                &#x27;data-content&#x27;: control.tooltip
            }).popover();

        }

        return ctrl;


    },

    _control_preview = function() {

        // Preview a control

    };

    eduVis.controls = {
        load : _control_load,
        preview : _control_preview,
        create : _control_create
    };


}(EduVis));

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
